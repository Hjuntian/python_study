
## 1. 维度与 shape 基础

- **维度 (dimension, ndim)**：你需要多少个下标才能定位一个元素  
- **shape**：每一维的长度（元素个数）  

### 例子

```python
import numpy as np

# 一维数组
a = np.array([1, 2, 3])
print(a.shape)  # (3,) → 1 维，长度 3
print(a.ndim)   # 1

# 二维数组，1 行 3 列
b = np.array([[1, 2, 3]])
print(b.shape)  # (1,3)
print(b.ndim)   # 2

# 二维数组，3 行 1 列
c = np.array([[1],[2],[3]])
print(c.shape)  # (3,1)
print(c.ndim)   # 2
````

---

## 2. 广播 (Broadcasting) 原则

### 广播核心

> 广播 = 用 1 当作“可复制维”，从右往左对齐维度进行逐元素运算

### 规则步骤

1. 比较两个数组的维度数，**少的在左侧补 1**
2. 从最右维度开始逐维比较：

   * 相等 ✅
   * 或其中一个是 1 ✅（可以复制）
   * 否则 ❌ 报错

### 示例 1：一维 + 二维

```python
A = np.array([[1, 2, 3],
              [4, 5, 6]])  # shape (2,3)
b = np.array([10, 20, 30]) # shape (3,)

# b shape 1维 → 左补 1 → (1,3)
# 对齐比较：
# 最后一维 3 vs 3 ✅
# 倒数第二维 2 vs 1 ✅ → 可以复制
C = A + b
print(C)
```

输出：

```
[[11 22 33]
 [14 25 36]]
```

### 示例 2：二维 + 二维

```python
A = np.array([[1,2,3],[4,5,6]])  # (2,3)
B = np.array([[10],[20]])        # (2,1)

# 广播：
# 最后一维 3 vs 1 ✅ → B 列复制 3 次
# 倒数第二维 2 vs 2 ✅
print(A + B)
```

输出：

```
[[11 12 13]
 [24 25 26]]
```

### 示例 3：广播失败

```python
A = np.array([[1,2,3],[4,5,6]])  # (2,3)
B = np.array([[10,20],[30,40]])  # (2,2)

# 倒数第一维 3 vs 2 ❌ → 无法广播
# print(A + B)  # ValueError
```

### 0 维与空数组边界

```python
A = np.array([[1,2,3],[4,5,6]])  # (2,3)
B = np.array([]).reshape(0,3)    # (0,3)

# 无法广播：倒数第二维 2 vs 0 ❌
# print(A + B)  # ValueError

# 可广播示例：
C = np.array([10,20,30]).reshape(1,3)  # (1,3)
D = np.array([]).reshape(0,3)           # (0,3)
# D + C → shape (0,3) 合法
```

---

## 3. 常用算术运算

### 3.1 基本运算（加、减、乘、除、幂）

```python
a = np.array([1,2,3])
b = np.array([10,20,30])

print(a + b)  # [11 22 33]
print(a - b)  # [-9 -18 -27]
print(a * b)  # [10 40 90]
print(a / b)  # [0.1 0.1 0.1]
print(a ** 2) # [1 4 9]
```

### 3.2 不同形状的运算（广播示例）

```python
A = np.array([[1,2,3],[4,5,6]])  # (2,3)
b = np.array([10,20,30])         # (3,)

# b 自动广播到 (1,3) 再扩展到 (2,3)
print(A + b)
```

---

## 4. 聚合函数 (sum, min, max)

### 4.1 一维数组

```python
a = np.array([1,2,3,4])

print(np.sum(a))  # 10
print(np.min(a))  # 1
print(np.max(a))  # 4
```

### 4.2 二维数组

```python
A = np.array([[1,2,3],[4,5,6]])

# axis=None → 所有元素求和
print(np.sum(A))        # 21

# axis=0 → 按列求和（每列的和）
print(np.sum(A, axis=0))  # [5 7 9]

# axis=1 → 按行求和（每行的和）
print(np.sum(A, axis=1))  # [6 15]

# min/max 也一样
print(np.min(A, axis=0))  # [1 2 3]
print(np.max(A, axis=1))  # [3 6]
```

### 4.3 结合广播

```python
A = np.array([[1,2,3],[4,5,6]])  # (2,3)
b = np.array([10,20,30])         # (3,)

C = A + b                         # 广播后 (2,3)
print(np.sum(C, axis=1))          # 每行求和 → [66 105]
```

---

## 5. 广播原则口诀

1. 少的维度 → 左补 1
2. 从右往左对齐：

   * 相等 ✅
   * 或 1 ✅ → 可以复制
   * 否则 ❌ → 报错
3. 0 不算 1 → 不可复制
4. `(n,)` 一维数组：

   * 广播时逻辑上可当 `(1,n)` 使用，但 shape 本身不变

---

## 6. 广播可视化理解

* `(3,)` + `(2,3)` → `(3,)` 被当作 `(1,3)` → 复制到每行

```
A = [[1 2 3]
     [4 5 6]]  shape(2,3)

b = [10 20 30] shape(3,)
广播后：
[[10 20 30],
 [10 20 30]]  shape(2,3)

A + b = [[11 22 33],
         [14 25 36]]
```

---

## 7. reshape 与维度控制

```python
a = np.array([1,2,3])
print(a.shape)           # (3,)
b = a.reshape(1,3)       # 二维行向量
c = a.reshape(3,1)       # 二维列向量
```

* `(3,)` → 一维
* `(1,3)` → 2 维，1 行 3 列
* `(3,1)` → 2 维，3 行 1 列

> reshape 不改变元素，只改变形状，配合广播可灵活运算

---

## 8. 小结

* 广播本质：**用 1 维“拉伸”对齐形状**
* `(n,)` = 一维数组，不是行/列
* 所有运算都遵守广播规则
* `sum/min/max` 可指定 `axis`，结合广播灵活使用

```

---
